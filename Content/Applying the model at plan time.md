## Interpreting the parameters
Just like with the run time application, we're gonna start reinterpreting the risk factors in a way that makes the most sense in the plan time domain.

Intrinsic risk still depends on the task that is being carried out. Since we're using this data during the planning phase we are already aware of which tasks we're scheduling, so we can assume this value to be known at all times. Since this value should be included in the \[0,1] interval, we assign a risk value to the specific tasks based on how risky they are relative to each other, with the riskiest one having a value that is closest to 1.

Geometric risk depends on which of the possible trajectories the robot is following to carry out a given task. This is also data that the planner has to be aware of in order to find a suitable schedule. The planner knows what trajectory the robot will follow, but how will the associated risk factor be estimated? Our proposed interpretation involves using a table of precompiled data about the set of tasks, trajectories, and movement speeds available to the planner.
Specifically, the geometric risk associated to a given trajectory depends on a compile-time estimation of the operator's general working area. Once the general positioning of the human inside the HRC cell has been defined, it is possible to determine whether the trajectory is likely to intersect with a body part. It is also possible to determine which body part is subject to risk. We assigned this value based on how close the trajectory gets to the general position of the operator's head, but different strategies can be used.

Movement speed is known by the planner, since it is tasked with determining the target movement speed for each task. This value could be determined by considering how fast the robot is moving compared to its maximum allowed velocity. The final value will represent what percentage of the maximum speed the robot is currently moving at.

It is worth mentioning that geometric risk and movement speed are decided at plan time, but complete implementations of this model are supposed to implement run time safety measures to ensure that accidents still do not happen. The run time solution could be the application mentioned earlier, but it could also be a less sophisticated system that only engages in speed moderation and safety stops. In any case, the plan time estimates of geometric risk and movement speed are just target values and the plan execution doesn't have to blindly follow these directives if it means posing a risk on the human operator.

Impact probability is one of the most important values, and it represents one of the most crucial properties of the plan time application. Our proposed interpretation of impact probability makes it depend completely on the planner's knowledge of which tasks are being carried out concurrently by the human and the robot. The planner knows what tasks the human is doing while the robot accomplishes a given one. If we define what general working area is associated to a task, then we can determine how close the working areas of two tasks are going to be. This is critical when determining impact probability. We decided to estimate impact probability based on how close the human and the robot will be working together, given the knowledge of which specific tasks they're going to be carrying out at the same time. Since a single human task might not completely overlap with a robot task, and a robot task might overlap with multiple human tasks, there can be different strategies for calculating the exact value. Our approach will be discussed in later on in the paper. The planner might not always know which human tasks are scheduled along with a robot one, this is due to advanced planners such as PLATINUm making heavy use of heuristics to find better solutions, or comparable solutions in less time. In that case, best case or worst case analysis can be used to approximate the safety of tasks.

Human uncertainty is hard to know for sure during plan time, so we need a sensible strategy to estimate it. This is where one of the other features of this model can come into play: responsiveness to the human operator's experience level. We propose that human uncertainty at plan time should represent the expertise level of the human operator. This allows the planner to take into account different skill levels when assessing risk, and potentially act in a more prudent way with inexperienced operators.

## Accounting for efficiency
A planner is the best suited component to come up with a tradeoff between safety and efficiency. This is because of all the prior knowledge that the planner has, since it is the component that makes the decision it has to be generally aware of every detail. This data could be used in powerful ways, as we'll show later on.

We will be referring to the time it takes to carry out a task (or a plan) with the term 'makespan'.
Makespan data can be derived at plan time from the trajectory and movement speed data that we are also using to assess the risk value. The trajectory data includes the expected distance that the robot has to travel to accomplish a task, and the movement speed tells us how much time the robot will take to follow the complete trajectory. This is the simplest way to make an estimate of the makespan of the robot's tasks. More sophisticated techniques could be used for this, an example could be taking into account the collisions that the robot might have with the human and penalizing those tasks. 
The makespan of human tasks, on the other hand, can be estimated with data such as task type and experience level. Simpler strategies could be used to evaluate this, as well as more sophisticated ones.

The estimated makespan can be used in a Pareto optimization when comparing different nodes during the plan time search for a feasible schedule. Different strategies can be used in the Pareto optimization, with widely varying degrees of complexity. We will show the one we used later on in the paper. As a rule of thumb, they all generally start by checking dominance conditions, which indicate when a plan is both safer and more efficient. If there is no clear superiority, then we can deploy all kinds of smart decision logic to find the final plan that better resembles what we want it to be. This represents one of the most critical components of a plan time implementation of this model. The Pareto logic in use can dramatically affect the schedules that the planner will come up with.

## Qualities
The proposed application of the model during the planning phases is fairly easy to implement. The easiest approach is getting a set of data that was pre compiled with appropriate strategies. A good set of pre compiled data will positively impact the quality of the resulting schedules and it makes it very easy to assign risk and makespan values to each task in the partial plans.

Obtaining pre compiled data is a great first step. Admittedly, it might not always be trivial to come up with an accurate and extensive set of data. Since the scale of the dataset may increase dramatically as the HRC scenario becomes more complex, and it could be hard to find sensible and appropriate values. 
Work could be done to improve this step of the planning process. It would be very helpful in the future to have automated tools to compile the data, or better guidelines to help come up with estimation strategies. Other fundamentally different solutions might involve dynamically calculating data according to sophisticated heuristics instead of relying on a static set of values.

Knowing what the peak risks are in a schedule before executing the plan can be very helpful when trying to maximize safety for the human worker. Prior knowledge of unsafe tasks could allow the planner to schedule additional safety oriented tasks before carrying out the risky one. As an example, the planner could schedule a safety warning signal for the operator in order to get them further away from the danger. A full-fledged human-robot communication system could be built on top of this system.
Other solutions might involve completely different kinds of safety oriented actions preceding a necessary but risky task.

This model is suitable for use in multiobjective planning frameworks, thanks to the relatively simple amount of data that it is based on, and the handy risk assessment value that it outputs. The risk value can be used in conjunction with a wide variety of metrics, which may optimize for time efficiency, cost efficiency, ergonomics, etc.
Since it is mainly based on data gathered from a static set, our proposed implementation is fairly easy to develop using PLATINUm. PLATINUm's flexibility allowed us to build a complex logic such as this on top of it with relatively few hassles. The implementation details will be explored in the following chapters.

